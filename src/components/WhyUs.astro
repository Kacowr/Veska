---
import "./WhyUs.scss";

const t = Astro.props.t;
---

<div class="whyus" id="dlaczego-wlasnie-my">
  <h2>{t('why-us.heading')}</h2>
  <div class="whyus-details" id="whyus-details"> {/* Added id here */}
    <div class="whyus-side whyus-left">
      <h3 class="whyus-side-heading">{t('why-us.transparency.heading')}</h3>
      <hr />
      <p class="desktop-text">
        {t('why-us.transparency.desktop')}
      </p>

      <p class="mobile-text">
        {t('why-us.transparency.mobile')}
      </p>
    </div>

    <div class="whyus-middle">
      <h3 class="whyus-middle-heading">{t('why-us.solutions.heading')}</h3>
      <hr />
      <p class="desktop-text">
        {t('why-us.solutions.desktop')}
      </p>

      <p class="mobile-text">
        {t('why-us.solutions.mobile')}
      </p>
    </div>
    <div class="whyus-side whyus-right">
      <h3 class="whyus-side-heading">{t('why-us.team.heading')}</h3>
      <hr />
      <p class="desktop-text">
        {t('why-us.team.desktop')}
      </p>

      <p class="mobile-text">
        {t('why-us.team.mobile')}
      </p>
    </div>
  </div>
</div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const tl = gsap.timeline({
    scrollTrigger: ".whyus",
    onComplete: () => {
      const element = document.getElementById("whyus-details");

      if (element) {
        const hasOverflow = element.scrollWidth > element.clientWidth || element.scrollHeight > element.clientHeight;

        if (hasOverflow) {
          const centerX = (element.scrollWidth - element.clientWidth) / 2;

          element.scrollTo({
            left: centerX,
            top: 0,
            behavior: 'smooth'
          });
        } else {
          console.log(`Element with ID "whyus-details" does not have overflow.`);
        }
      } else {
        console.error(`Element with ID "whyus-details" not found.`);
      }
    }
  });

  tl.from(".whyus > h2", {
    delay: 0.25,
    y: -25,
    opacity: 0,
  })
      .from(".whyus-middle", {
        y: -50,
        duration: 0.5,
        opacity: 0,
      })
      .from(".whyus-left", {
        x: 400,
        opacity: 0,
        scale: 6 / 5,
        duration: 2,
        ease: "expo",
      })
      .from(
          ".whyus-right",
          {
            x: -400,
            opacity: 0,
            scale: 6 / 5,
            duration: 2,
            ease: "expo",
          },
          "<"
      );

</script>
