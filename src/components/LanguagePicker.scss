$picker-background: #fff;
$picker-border: #e0e6ed;
$picker-shadow: rgba(0, 0, 0, 0.1);
$picker-item-hover: #f8fafc;
$active-item-color: #3b82f6;
$active-item-font-weight: 600;
$border-radius: 12px;
$transition-duration: 0.25s;
$transition-easing: cubic-bezier(0.4, 0, 0.2, 1);

.language-picker {
  list-style: none;
  margin: 0;
  padding: 0;
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 100;
  display: flex;
  flex-direction: column;
  border-radius: $border-radius;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all $transition-duration $transition-easing;

  &:hover {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
    transform: translateY(-1px);
  }

  > li {
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transform: translateY(-8px);
    transition: all $transition-duration $transition-easing;
    background-color: $picker-background;
    border-bottom: 1px solid rgba(224, 230, 237, 0.5);

    &:last-child {
      border-bottom: none;
      border-radius: 0 0 $border-radius $border-radius;
    }

    a {
      text-decoration: none;
      color: #64748b;
      padding: 12px 16px;
      display: block;
      white-space: nowrap;
      font-size: 14px;
      font-weight: 500;
      transition: all $transition-duration $transition-easing;
      border-radius: inherit;
      position: relative;

      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(147, 51, 234, 0.05));
        opacity: 0;
        transition: opacity $transition-duration $transition-easing;
        border-radius: inherit;
      }

      &:hover::before {
        opacity: 1;
      }

      &:hover {
        background-color: $picker-item-hover;
        color: #334155;
        transform: translateX(2px);
      }
    }

    &.active {
      position: relative;
      opacity: 1;
      max-height: 50px;
      transform: translateY(0);
      background: linear-gradient(135deg, #fff, #f8fafc);
      border: 2px solid rgba(59, 130, 246, 0.1);
      border-radius: $border-radius;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);

      &::after {
        content: "\25bc";
        position: absolute;
        top: 50%;
        right: 12px;
        transform: translateY(-50%);
        font-size: 10px;
        color: $active-item-color;
        transition: all $transition-duration $transition-easing;
        opacity: 0.7;
      }

      a {
        color: $active-item-color;
        font-weight: $active-item-font-weight;
        padding-right: 32px; // Make room for arrow
      }
    }
  }

  @media (hover: hover) and (pointer: fine) {
    &:hover {
      > li {
        opacity: 1;
        max-height: 50px;
        transform: translateY(0);
        border: 1px solid $picker-border;
        background-color: $picker-background;

        @for $i from 1 through 10 {
          &:nth-child(#{$i + 1}) {
            transition-delay: #{$i * 0.05}s;
          }
        }

        &:first-child {
          border-radius: $border-radius $border-radius 0 0;
        }

        &:last-child {
          border-radius: 0 0 $border-radius $border-radius;
        }

        &:only-child {
          border-radius: $border-radius;
        }

        &.active {
          background: linear-gradient(135deg, #fff, #f8fafc);
          border: 2px solid rgba(59, 130, 246, 0.15);
          margin-bottom: 2px;

          &::after {
            transform: translateY(-50%) rotate(180deg);
            opacity: 1;
          }

          a {
            color: $active-item-color;
            font-weight: $active-item-font-weight;

            &::before {
              opacity: 0;
            }

            &:hover {
              background-color: transparent;
              transform: none;

              &::before {
                opacity: 0.3;
              }
            }
          }
        }
      }
    }
  }

  @media (hover: none) or (pointer: coarse) {
    &.mobile-open {
      > li {
        opacity: 1;
        max-height: 50px;
        transform: translateY(0);
        border: 1px solid $picker-border;
        background-color: $picker-background;

        @for $i from 1 through 10 {
          &:nth-child(#{$i + 1}) {
            transition-delay: #{$i * 0.05}s;
          }
        }

        &:first-child {
          border-radius: $border-radius $border-radius 0 0;
        }

        &:last-child {
          border-radius: 0 0 $border-radius $border-radius;
        }

        &:only-child {
          border-radius: $border-radius;
        }

        &.active {
          background: linear-gradient(135deg, #fff, #f8fafc);
          border: 2px solid rgba(59, 130, 246, 0.15);
          margin-bottom: 2px;

          &::after {
            transform: translateY(-50%) rotate(180deg);
            opacity: 1;
          }
        }
      }
    }

    > li.active {
      cursor: pointer;

      &::after {
        opacity: 1;
      }
    }
  }

  > li a:focus {
    outline: 2px solid $active-item-color;
    outline-offset: -2px;
    border-radius: 8px;
  }

  @keyframes slideInFromTop {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  animation: slideInFromTop 0.4s $transition-easing;
}
